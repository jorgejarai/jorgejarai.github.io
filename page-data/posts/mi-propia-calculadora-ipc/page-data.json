{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/mi-propia-calculadora-ipc","result":{"data":{"markdownRemark":{"id":"4b109709-a50d-5fd3-990b-d442685f84fb","html":"<p>Estaba en medio de una de mis típicas crisis de aburrimiento tratando de buscar una idea para una <em>app</em> en React (buscar ideas factibles nunca ha sido mi fuerte) cuando, de repente, me acordé de la <a href=\"https://calculadoraipc.ine.cl/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">calculadora de variación del IPC</a> que ofrece el INE (Instituto Nacional de Estadísticas, el ente chileno a cargo de cosas como el censo y estadísticas vitales) para determinar el poder adquisitivo del peso chileno (CLP) a lo largo del tiempo. La página cumple su propósito, sin lugar a dudas, pero me pregunté si podría hacer una propia que cumpla el mismo propósito, usando tecnologías más recientes y que se vea ligeramente mejor. Como me pareció una excelente idea para una <em>app</em> de la que me sentiría lo suficientemente orgulloso como para no tener oculta en una carpeta de mi PC, me dispuse a crear un proyecto Next.js y me puse manos a la obra.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d942956f6fd996ccd94ac94ad0315f0c/d69c4/calculadora-ipc-ine.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.08333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABsUlEQVQoz51TS24UMRCdS7FhwfBbwOlAhIhwghyCBeEzKEEcAE3ICGURDeP+uP1tt9t+VLnToXcgLD1VdVX5qapfeaWbDtW+gu97GGNgrYVzrvierPceOWf861lxcUoJ4zj+J/7cTSljNQwD6lZB1B0aqUtH3K33/WSXvp/h4RYo3zQNc60iMRut0dQVuraB6SSUbAgt9MJnqzuKkW+1grcazkxIMSCNcSLkuU+/XeP+y894fnKO9dEXPCCwXb8m/9UGD48mrAmPKPb4+BxP3lzgKeHZ26+492KD4487YqKRiRo/hcKnHwKbqwpnlwIfCGzfbw93mONz7myOE959/4XtXiKnSCNHatU7JG9Azq1WeUIegEix2P9d3jwi8Misjuw0bvY1tHaoSZhDJaGNQyQFE23BSOqxDTFB6IDr1sGGcZGjXobbf8iEShscBP1s69Api7ao3Zd1Wp4wZlwKiy3BEOE8C58yaVGZHJZcKUWdmkK62+0gRFUKmZQ3gRdeKo2appHKoKMmLC3/QPd5l5nsrsOedowx75SUsrwULgghTLnyahx6rmGfwDHOzTXc3G9tWT5iVz/A1AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/d942956f6fd996ccd94ac94ad0315f0c/8ac56/calculadora-ipc-ine.webp 240w,\n/static/d942956f6fd996ccd94ac94ad0315f0c/d3be9/calculadora-ipc-ine.webp 480w,\n/static/d942956f6fd996ccd94ac94ad0315f0c/e46b2/calculadora-ipc-ine.webp 960w,\n/static/d942956f6fd996ccd94ac94ad0315f0c/0a92e/calculadora-ipc-ine.webp 1002w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/d942956f6fd996ccd94ac94ad0315f0c/8ff5a/calculadora-ipc-ine.png 240w,\n/static/d942956f6fd996ccd94ac94ad0315f0c/e85cb/calculadora-ipc-ine.png 480w,\n/static/d942956f6fd996ccd94ac94ad0315f0c/d9199/calculadora-ipc-ine.png 960w,\n/static/d942956f6fd996ccd94ac94ad0315f0c/d69c4/calculadora-ipc-ine.png 1002w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/d942956f6fd996ccd94ac94ad0315f0c/d9199/calculadora-ipc-ine.png\"\n            alt=\"La calculadora IPC del INE\"\n            title=\"La calculadora IPC del INE\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p align=\"center\"><i>La calculadora del INE, hecha con las mejores tecnologías que el año 2008 puede ofrecer.</i></p>\n<p>Como pueden ver, la página de la que me estoy inspirando cumple su propósito, pero encuentro que podría mejorarse. Por ejemplo, la parte donde se especifican los intervalos de fechas y el monto a convertir es muy pequeña comparada al contenedor donde salen los resultados. Además, el valor ajustado, que es el resultado que cualquier persona que considere que la pregunta “¿cuánto costaría el pasaje de micro en mayo de 1987 en plata de hoy?” es digna de hacerse busca, está “relegado” a un texto más pequeño que el porcentaje de variación que, aunque importante, considero que podría dejarse más en un segundo lugar.</p>\n<p>Volviendo a mi <em>app</em>, me puse a trabajar y, una vez tuve configurado el proyecto Next.js con TypeScript y Tailwind CSS, empecé a ver cómo podría rescatar la información sobre la variación del IPC (Índice de Precios al Consumidor). Partí revisando la <a href=\"https://www.ine.cl/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">página del INE</a> en busca de alguna base de datos pública o algo, pero solo encontré las estadísticas desagregadas por tipo de bien o servicio en lugar del porcentaje de variación mensual y, ya que la estadística no es lo mío, decidí mejor probar con la misma API que usa la calculadora. Como quería evitar dentro de lo posible enviar repetidas consultas a su <em>endpoint</em> estando la aplicación en producción, pensé en descargar una sola vez toda la información que pudiera, ponerla en algún tipo de base de datos e irla actualizando cada mes.</p>\n<p>Para tener una tabla propia con la variación mensual del IPC, creé un <em>script</em> en Python que llamara de forma repetida a la API del INE, consultando por la variación de $ 1000 millones (para obtener una buena cantidad de decimales) mes a mes desde marzo de 1928. Habría usado un número más grande, pero la plataforma no me dejaba usar más de 10 dígitos (ugh). Luego, extraje la información en XML (doble ugh) y mandé todo a un archivo CSV, el cual copié en una planilla de Google Sheets. Decidí usar esto en lugar de desplegar un servidor base de datos real (profe Varas, perdóneme si lee esto xd) porque no necesitaba algo muy complejo para esta aplicación y porque iba a aprovechar la capacidad de Next.js de generar sitios estáticos en tiempo de compilación para insertar la tabla de IPC en la misma página, actualizándola sólo cuando se añada una nueva entrada cada mes. De esa manera puedo ofrecer resultados a medida que el usuario tipea sin usar una API externa.</p>\n<p>Con respecto al diseño, ocupé toda mi energía creativa en diseñar esta obra de arte:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 580px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/890d8b0feec1bd48dc7395010ded93e8/b6272/mi-calculadora-ipc.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 92.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACwUlEQVQ4y41UaW/bMAz1//9N+zKs29B2PdM0V3PYsZ34vm35fCNlO3GHDZiAB5EU+URJpJQgBxh+1kkEBaBZEeYfOtYHC1vdxWyl4p30jWpjuT/h8e0DupMgLPq4MZ5nJchZ6MHGuAT2po+buxf8uJ/h/mWFL19vpX779I6756WcedOkGoiykYMI+8wAj2cyGG6GcyCQNkBaAzEFZW0vM0FCcySAo5PiaCfw0j6OOZhLCUlJKatE9LPlpzCdCFHRIcwaxEVLGfRIRCfBdt0KYNghyS35DHbOMM4bWNYZrutiOnJRQVNVZGkCQdlGWY3TyUBK+nSkuYCqHlAUObJSHrmFGxXwYkG71RJBWsGnM7KNZTsUsAgOpTDaGOw7+oVsIy7FH145uNwDZVP2Or8iz+vDGdujI++OTisxfWEZO8QrwVAuI9iRS6OsWnmkbnI8IQT2+z1WyyXCOJMldim34aUHQnwi3Gg23U2Jqm6IuIEoaylneYHt7oDFYgkvuNbhWCnMpfj5tDh7mY88Onppe8FYp1w+12aYyNfC7g151aFqOpR1B1G3KErKjo7OYHnUeb1s2Bcy5nqX3WfCuukut1bSfem6DoPgODYMwyD9SKVjoqnr4Vb7mH8SVk1P1nWdBI8wDDGbvWE+nyOOY7ld27YYlmXM/xEOuXqeh81mA03T4Pu+JBt9/k44+S2qupU0XdcOZVLANA3YtoWEsjuZJvI8Gwh7X47xRsJMZnh9ZdmTRUPg/myQCn4oyJZiOau43zu5noh28Pvj+xoFO6LetWL65/pfRHcyOTM0K8HhFEpZPUcSezOANuhnqvCRVBmLmRf4/7u5fZZ/H+P7/Su+kf7156P8B5/mH3hZ7PH8viN9gYfZGr9e11Bps7HIlUvr0A473cNyZ2JBWFH/csdsVEvaGNujK8FrTPww28iY6Y//G3zOrcZ6su5fAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/890d8b0feec1bd48dc7395010ded93e8/8ac56/mi-calculadora-ipc.webp 240w,\n/static/890d8b0feec1bd48dc7395010ded93e8/d3be9/mi-calculadora-ipc.webp 480w,\n/static/890d8b0feec1bd48dc7395010ded93e8/4fac6/mi-calculadora-ipc.webp 580w\"\n              sizes=\"(max-width: 580px) 100vw, 580px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/890d8b0feec1bd48dc7395010ded93e8/8ff5a/mi-calculadora-ipc.png 240w,\n/static/890d8b0feec1bd48dc7395010ded93e8/e85cb/mi-calculadora-ipc.png 480w,\n/static/890d8b0feec1bd48dc7395010ded93e8/b6272/mi-calculadora-ipc.png 580w\"\n            sizes=\"(max-width: 580px) 100vw, 580px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/890d8b0feec1bd48dc7395010ded93e8/b6272/mi-calculadora-ipc.png\"\n            alt=\"Mi versión de la calculadora IPC\"\n            title=\"Mi versión de la calculadora IPC\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p align=\"center\"><i>Acepto ofertas como diseñador gráfico. No se peleen por mí.</i></p>\n<p>No es la aplicación más bonita del mundo, pero el formulario mismo es más grande y muestra el valor calculado en mayor tamaño, además de que es responsiva y compatible como PWA.</p>\n<p>Con respecto al uso, es simple de usar: definimos un intervalo de tiempo, un monto en el cuadro de texto y, a medida que escribimos, vamos obteniendo el resultado. Hice repetidas pruebas con la calculadora del INE para asegurarme de que los valores coinciden y lo logra perfectamente, aunque con cifras muy grandes los valores empiezan a diferir (no ocupé todos los decimales que me retornaba la API por temor a que hubiera artefactos producto de ser números de coma flotante).</p>\n<p>Si les interesa echarle una mirada, pueden visitarla haciendo clic <a href=\"https://ipc.jorgejarai.xyz\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">aquí</a> e instalarla como PWA si gustan. Además, el proyecto con el código que usé para la <em>app</em> lo pueden encontrar <a href=\"https://github.com/jorgejarai/calculadora-ipc\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">acá</a>. Si tienen alguna duda o problema, no duden en contactarme o reportar un <em>bug</em> o <em>pull request</em> en el repositorio. ¡Hasta la próxima!</p>","fields":{"slug":"/posts/mi-propia-calculadora-ipc","tagSlugs":["/tag/programming/","/tag/java-script/","/tag/type-script/","/tag/node-js/","/tag/react/","/tag/espanol/"]},"frontmatter":{"date":"2021-07-22T02:05:00Z","description":"Considerando que la calculadora que ofrece el INE para la variación del IPC no es tan buena, decidí hacer una yo mismo.","tags":["Programming","JavaScript","TypeScript","NodeJS","React","Español"],"title":"[ES] Mi propia calculadora IPC","socialImage":{"publicURL":"/static/f463ff7592afdee2e8660e64fb228e0c/photo.jpg"}}}},"pageContext":{"slug":"/posts/mi-propia-calculadora-ipc"}},"staticQueryHashes":["251939775","401334301","825871152"]}